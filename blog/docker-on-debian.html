<!DOCTYPE html>
<html lang="en">

  <head>
      <title>chrooted.net</title>
      <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,600,700' rel='stylesheet' type='text/css' />
      <link href='http://fonts.googleapis.com/css?family=Merriweather:300' rel='stylesheet' type='text/css'/>
      <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:200,400,700' rel='stylesheet' type='text/css'/>
      <link rel="stylesheet" type="text/css" href="http://chrooted.net/theme/css/icons.css"/>
      <link rel="stylesheet" type="text/css" href="http://chrooted.net/theme/css/styles.css"/>
      <meta charset="utf-8" />
        <link href="/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="chrooted.net RSS Feed" />
  </head>

  <body id="index">
    <!-- header -->
    <header class="siteheader">
      <!-- site image -->
        <div class= "siteimage">
          <a class="nodec" href=https://secure.gravatar.com/avatar/566e0ab0119d534d05abbcf61d316d28?s=300>
            <img width="200" height="200" src=https://secure.gravatar.com/avatar/566e0ab0119d534d05abbcf61d316d28?s=300>
          </a>
        </div>

      <div class = "sitebanner">
        <h1><a class="sitetitle nodec" href="http://chrooted.net">chrooted.net</a></h1>
        <h3 class ="sitesubtitle">by Patrick Pelletier</h3>
        <!-- nav -->
        <nav class="menu">
          <ul>
            <!-- menu items-->
              <li><a class="nodec" href="/">blog</a></li>
            <!--pages-->
                <li><a class="nodec" href="http://chrooted.net/pages/about.html">about</a></li>
            <!-- services icons -->
              <li><a class="nodec icon-github" href="https://github.com/skinp"></a></li>
              <li><a class="nodec icon-twitter" href="https://twitter.com/skinp"></a></li>
              <li><a class="nodec icon-rss" href="/feeds/rss.xml"></a></li>
          </ul>
        </nav>
      </div> <!-- sitebanner -->
    </header>

    <!-- content -->

<section class="content">

  <h3 class="posttitle">
    <a class="nodec" href="/blog/docker-on-debian.html" rel="bookmark" title="Permalink to Docker on Debian">
      Docker on&nbsp;Debian
    </a>
  </h3>

  <div class="postinfo">
    <p class="published" title="2013-11-26T00:00:00">
      Tue 26 November 2013
    </p>

  </div><!-- .postinfo -->

  <div class="article">
    <p>I wanted to reinstall my inactive <span class="caps">KVM</span> <span class="caps">VPS</span> for quite some time and I thought it would be great if I could get some support for lightweight &#8220;virtual&#8221; containers to ease my development workflow. At first, I had a couple&nbsp;problems:</p>
<ul>
<li>Ubuntu 12.04 (in fact, almost all recent 64 bits Ubuntu version) wasn&#8217;t properly installing (The installer hanged during hardware&nbsp;discovery)</li>
<li>Docker was mostly Ubuntu only (well for easy install at&nbsp;least)</li>
<li>I had some trouble setting up simple lxc on Debian (There&#8217;s some documented issues on&nbsp;templates)</li>
</ul>
<p>So I was happy today when I saw <a href="http://blog.docker.io/2013/11/docker-0-7-docker-now-runs-on-any-linux-distribution/">the announcement of the new 0.7 version of Docker</a> which adds Standard Linux&nbsp;Support.</p>
<p>Here&#8217;s how I easily got it&nbsp;working:</p>
<div class="highlight"><pre><span class="c"># We&#39;ll do this stuff as root...</span>
sudo -i

<span class="c"># Install dependencies</span>
apt-get install lxc bridge-utils

<span class="c"># Cgroup support</span>
<span class="nb">echo</span> <span class="s1">&#39;cgroup    /sys/fs/cgroup  cgroup  defaults    0   0&#39;</span> &gt; /etc/fstab
mount -a

<span class="c"># <span class="caps">IP</span> forwarding</span>
<span class="nb">echo</span> <span class="s1">&#39;net.ipv4.ip_forward = 1&#39;</span> &gt; /etc/sysctl.conf
sysctl -p /etc/sysctl.conf

<span class="c"># Download and install (in /usr/local/bin) docker</span>
wget http://get.docker.io/builds/Linux/x86_64/docker-latest.tgz
tar -xf docker-latest.tgz -C /

<span class="c"># Start and test...</span>
docker -d <span class="amp">&amp;</span>
docker run -i -t ubuntu /bin/bash
</pre></div>


<p>After some light testing, it works quite well for basic usage. I haven&#8217;t tested any port forwarding and front facing services yet&#8230; next&nbsp;step.</p>
<p>Obviously, this has to be automated in some better way so I plan to write an <a href="https://github.com/ansible/ansible">Ansible</a> playbook for&nbsp;it.</p>
  </div><!-- .content -->

</section>


    <!-- footer -->
    <footer>
      <p>
        © Patrick Pelletier, license <a href="https://creativecommons.org/licenses/by-sa/3.0/"> CC BY-SA</a>
        unless otherwise noted.
        Generated by <a href= "http://docs.getpelican.com/">Pelican</a> with
        <a href="http://github.com/porterjamesj/crowsfoot">crowsfoot</a> theme.
      </p>
    </footer>
  </body>
</html>